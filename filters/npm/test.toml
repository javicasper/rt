command = ["npm test", "pnpm test", "yarn test", "npm run test", "npm run test:i"]

strip_ansi = true

skip = [
  "^> ",
  "^\\s*npm (warn|notice|WARN|verbose|info|timing|error|ERR)",
  "^\\s*WARN\\s",
  "^\\s*ERR!",
  "^\\s*yarn run",
  "^\\s*\\$\\s",
  "^\\s*$",
  "^\\s*at .*\\(.*:\\d+:\\d+\\)",
  "^\\s*at .*node_modules",
  "^\\s*Snapshots:",
  "^\\s*Time:",
  "^\\s*Ran all test suites",
  "^PASS ",
  "^\\s*Require stack:",
]

[on_success]
output = "All tests passed.\n{output}"

[on_failure]
start_at = "^Summary of all failing tests"
skip = ["^Summary of all failing tests"]
keep = [
  "^FAIL ",
  "^\\s+â—",
  "Cannot find module",
  "SyntaxError",
  "TypeError",
  "ReferenceError",
  "Error:",
  "Expected",
  "Received",
  "expect\\(",
  "^\\s*>\\s*\\d+\\s*\\|",
  "^\\s+\\d+ (failing|failed)",
  "^Test Suites:",
  "^Tests:",
]
